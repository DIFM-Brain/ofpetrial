install.packages("ggpubr")
library(ofpetrial)
?assign_rates()
pkgdown::build_site()
install.packages("pkgdown")
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
devtools::load_all()
devtools::document() # regenerate documents reflecting the changes and apply load_all()
#--- build pkgdown website ---#
pkgdown::build_site()
devtools::load_all()
devtools::document() # regenerate documents reflecting the changes and apply load_all()
#--- build pkgdown website ---#
pkgdown::build_site()
devtools::load_all()
library(ofpetrial)
#--- build pkgdown website ---#
pkgdown::build_site()
library(ofpetrial)
devtools::document() # regenerate documents reflecting the changes and apply load_all()
library(ofpetrial)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
library(ofpetrial)
n_plot_info <-
make_input_plot_data(
form = "NH3",
plot_width = measurements::conv_unit(60, "ft", "m"),
machine_width = measurements::conv_unit(60, "ft", "m"),
section_num = 1
)
exp_data <-
make_exp_plots(
input_plot_info = n_plot_info,
boundary_file = system.file("extdata", "boundary-simple1.shp", package = "ofpetrial"),
abline_file = system.file("extdata", "ab-line-simple1.shp", package = "ofpetrial"),
harvester_width = 30,
abline_type = "free",
headland_length = 30,
side_length = 60,
min_plot_length = 200,
max_plot_length = 300,
length_unit = "feet",
perpendicular = FALSE
)
viz_ep(exp_data, abline = FALSE)
n_rate_info <-
make_input_rate_data(
plot_info = n_plot_info,
gc_rate = 180,
unit = "lb",
rates = c(100, 140, 180, 220, 260),
design_type = "ls",
rank_seq_ws = c(1, 2, 3, 4, 5),
rank_seq_as = c(1, 2, 3, 4, 5)
)
td_ls_1 <-
assign_rates(
exp_data = exp_data,
rate_info = n_rate_info
)
viz_td(td_ls_1, abline = FALSE)
n_rate_info <-
make_input_rate_data(
plot_info = n_plot_info,
gc_rate = 180,
unit = "lb",
rates = c(100, 140, 180, 220, 260),
design_type = "rb",
)
td_rb <-
assign_rates(
exp_data = exp_data,
rate_info = n_rate_info
)
n_rate_info <-
make_input_rate_data(
plot_info = n_plot_info,
gc_rate = 180,
unit = "lb",
rates = c(100, 140, 180, 220, 260),
design_type = "rb",
)
td_rb <-
assign_rates(
exp_data = exp_data,
rate_info = n_rate_info
)
assign_rates
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
install.packages("ggExtra")
install.packages("tidyverse")
install.packages("tidyverse")
install.packages("tidyverse")
library(ggplot2)
p <- ggplot(iris) +
geom_point(aes(x = Sepal.Length, y = Sepal.Width, color = Species), alpha = 0.6, shape = 16) +
scale_color_brewer(palette = "Dark2") +
theme_bw() +
theme(legend.position = "bottom") +
labs(x = "Sepal Length", y = "Sepal Width")
p
library(ggExtra)
ggMarginal(p, type = "density", groupColour = TRUE, groupFill = TRUE)
#!===========================================================
#! Check
#!===========================================================
#--- regenerate documents reflecting the changes and apply load_all() ---#
devtools::document()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%"
)
seed_plot_info <-
prep_plot_fs(
input_name = "seed",
machine_width = 60,
section_num = 24,
harvester_width = 30,
plot_width = 30
)
seed_plot_info
n_plot_info <-
prep_plot_fs(
input_name = "NH3",
machine_width = 45,
section_num = 1,
harvester_width = 30,
plot_width = 45
)
n_plot_info
input_plot_info <- list(seed_plot_info, n_plot_info)
exp_data <-
make_exp_plots(
input_plot_info = input_plot_info,
boundary_data = system.file("extdata", "boundary-simple1.shp", package = "ofpetrial"),
abline_data = system.file("extdata", "ab-line-simple1.shp", package = "ofpetrial"),
abline_type = "free"
)
exp_data$exp_plots
exp_data$exp_plots[[1]]
viz(exp_data, type = "layout")
#!===========================================================
#! Assign rates
#!===========================================================
seed_rate_info <-
prep_rates_s(
plot_info = seed_plot_info,
gc_rate = 32000,
unit = "seed",
min_rate = 16000,
max_rate = 40000,
num_rates = 5,
design_type = "jcls"
)
seed_rate_info
n_rate_info <-
prep_rates_s(
plot_info = n_plot_info,
gc_rate = 180,
unit = "lb",
rates = c(100, 140, 180, 220, 260),
design_type = "ls",
rank_seq_ws = c(5, 4, 3, 2, 1)
)
n_rate_info
trial_design <- assign_rates(exp_data, rate_info = list(seed_rate_info, n_rate_info))
viz(trial_design)
yield_sf <- st_read("inst/extdata/yield-simple1.shp")
ssurgo_sf <- st_read("inst/extdata/ssurgo-simple1.shp")
char_data <-
tibble::tibble(
vars = list("Yld_Vol_Dr", c("mukey", "clay")),
data = list(yield_sf, ssurgo_sf)
)
spatial_data <- ssurgo_sf
char_vars <- c("mukey", "clay")
#*===========================================================
#* Helper functions
#*===========================================================
joined_data <-
st_join(trial_design$trial_design[[1]], dplyr::select(spatial_data, one_of(char_vars))) %>%
data.table()
joined_data$mukey <- factor(joined_data$mukey)
var <- "mukey"
var <- "clay"
cor_temp <-
data.table(joined_data)[, ..var_with_rate] %>%
cor(use = "complete.obs")
cor_temp
var_class <- class(joined_data[[var]])
var_with_rate <- c("rate", var)
cor_temp <-
data.table(joined_data)[, ..var_with_rate] %>%
cor(use = "complete.obs")
cor_temp
g_cor <-
# ggplot(joined_data, aes_string(y = "rate", x = var)) +
(
ggplot(joined_data, aes(y = rate, x = clay)) +
geom_point() +
theme_bw()
) %>%
ggExtra::ggMarginal(type = "histogram")
g_cor
var <- "mukey"
var_class <- class(joined_data[[var]])
var_with_rate <- c("rate", var)
data.table(joined_data)[, ..var_with_rate] %>%
.[, .(rate_mean = mean(rate), rate_sd = sd(rate)), by = var]
g_cor <-
(
ggplot(joined_data) +
geom_boxplot(aes_string(y = "rate", x = var))
) %>%
ggExtra::ggMarginal(type = "histogram")
ggplot(joined_data) +
geom_boxplot(aes_string(y = "rate", x = var))
g_cor <-
(
ggplot(joined_data) +
geom_point(aes_string(y = "rate", x = var))
) %>%
ggExtra::ggMarginal(type = "histogram")
var
install.packages("terra")
install.packages("stars")
install.packages("sf")
library(stars)
library(terra)
library(raster)
elev <- readRDS("/Users/tmieno2/Dropbox/DIFM_Brain/ofpetrial/inst/extdata/topography.rds")
plot(elev["slope"])
install.packages("elevatr")
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
pkgdown::build_site()
options(rmarkdown.html_vignette.check_title = FALSE)
options(rmarkdown.html_vignette.check_title = FALSE)
pkgdown::build_site()
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
library(ofpetrial)
install.packages("languageserver")
