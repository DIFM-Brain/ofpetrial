<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ofpetrial">
<title>Basic Workflow • ofpetrial</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic Workflow">
<meta property="og:description" content="ofpetrial">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-B09QYRX8XQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B09QYRX8XQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light" data-bs-theme="default"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ofpetrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/V0-basic-work-flow.html">Basic Workflow</a>
    <a class="dropdown-item" href="../articles/V5-understanding-structure.html">Understanding the structure of objects generated by the package</a>
    <a class="dropdown-item" href="../articles/V1-trial-design-options.html">Trial Design Options</a>
    <a class="dropdown-item" href="../articles/V2-ab-line.html">Trial AB-line Types and Options</a>
    <a class="dropdown-item" href="../articles/V4-diagnose-td.html">Diagnose Trial Designs</a>
    <a class="dropdown-item" href="../articles/V3-change-rates-manually.html">Change Trial Rates Manually</a>
    <a class="dropdown-item" href="../articles/V6-non-regular-field.html">Non-regular fields</a>
    <a class="dropdown-item" href="../articles/V7-visualize-from-scratch.html">Modify trial design maps or make them from scratch</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DIFM-Brain/ofpetrial/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Basic Workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DIFM-Brain/ofpetrial/blob/HEAD/vignettes/articles/V0-basic-work-flow.Rmd" class="external-link"><code>vignettes/articles/V0-basic-work-flow.Rmd</code></a></small>
      <div class="d-none name"><code>V0-basic-work-flow.Rmd</code></div>
    </div>

    
    
<p>Here, we demonstrate a typical workflow of using the
<code>ofpetrial</code> package to create a trial design through an
example of two-input on-farm experiment trial.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://difm-brain.github.io/ofpetrial/">ofpetrial</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="create-experimental-plots">Create experimental plots<a class="anchor" aria-label="anchor" href="#create-experimental-plots"></a>
</h2>
<div class="section level3">
<h3 id="prepare-plot-information-for-the-inputs">Prepare plot information for the inputs<a class="anchor" aria-label="anchor" href="#prepare-plot-information-for-the-inputs"></a>
</h3>
<p>We start with specifying plot and machine information for inputs
using <code>prep_plot</code>, which simply creates a data.frame of the
specified information with some internal unit conversion of length
(e.g., feet to meter).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- for nitrogen ---#</span></span>
<span><span class="va">n_plot_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prep_plot.html">prep_plot</a></span><span class="op">(</span></span>
<span>    input_name <span class="op">=</span> <span class="st">"NH3"</span>,</span>
<span>    unit_system <span class="op">=</span> <span class="st">"imperial"</span>,</span>
<span>    machine_width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    section_num <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    harvester_width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    plot_width <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">n_plot_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ input_name      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NH3"</span></span>
<span><span class="co">#&gt; $ unit_system     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "imperial"</span></span>
<span><span class="co">#&gt; $ machine_width   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ section_num     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1</span></span>
<span><span class="co">#&gt; $ section_width   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ harvester_width <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ plot_width      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ headland_length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 18.288</span></span>
<span><span class="co">#&gt; $ side_length     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ min_plot_length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 73.152</span></span>
<span><span class="co">#&gt; $ max_plot_length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 91.44</span></span>
<span></span>
<span><span class="co">#--- for seed ---#</span></span>
<span><span class="va">seed_plot_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prep_plot.html">prep_plot</a></span><span class="op">(</span></span>
<span>    input_name <span class="op">=</span> <span class="st">"seed"</span>,</span>
<span>    unit_system <span class="op">=</span> <span class="st">"imperial"</span>,</span>
<span>    machine_width <span class="op">=</span> <span class="fl">60</span>,</span>
<span>    section_num <span class="op">=</span> <span class="fl">24</span>,</span>
<span>    harvester_width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    plot_width <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">seed_plot_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ input_name      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "seed"</span></span>
<span><span class="co">#&gt; $ unit_system     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "imperial"</span></span>
<span><span class="co">#&gt; $ machine_width   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 18.288</span></span>
<span><span class="co">#&gt; $ section_num     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 24</span></span>
<span><span class="co">#&gt; $ section_width   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.762</span></span>
<span><span class="co">#&gt; $ harvester_width <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ plot_width      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ headland_length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 36.576</span></span>
<span><span class="co">#&gt; $ side_length     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.144</span></span>
<span><span class="co">#&gt; $ min_plot_length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 73.152</span></span>
<span><span class="co">#&gt; $ max_plot_length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 91.44</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-experimental-plots-1">Create experimental plots<a class="anchor" aria-label="anchor" href="#create-experimental-plots-1"></a>
</h3>
<p>Now that plot and machine specifications for the inputs are ready, we
can create experiment plots based on them using
<code><a href="../reference/make_exp_plots.html">make_exp_plots()</a></code>. Since this is a two-input case, you
create a list of plot information and the provided that to
<code><a href="../reference/make_exp_plots.html">make_exp_plots()</a></code> along with the path to the field boudary
and ab-line files (you can alternatively provide those data as
<code>sf</code> objects.).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input_plot_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">n_plot_info</span>, <span class="va">seed_plot_info</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/make_exp_plots.html">make_exp_plots</a></span><span class="op">(</span></span>
<span>    input_plot_info <span class="op">=</span> <span class="va">input_plot_info</span>,</span>
<span>    boundary_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"boundary-simple1.shp"</span>, package <span class="op">=</span> <span class="st">"ofpetrial"</span><span class="op">)</span>,</span>
<span>    abline_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ab-line-simple1.shp"</span>, package <span class="op">=</span> <span class="st">"ofpetrial"</span><span class="op">)</span>,</span>
<span>    abline_type <span class="op">=</span> <span class="st">"free"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE</span></span>
<span><span class="co">#&gt; Warning: There was 1 warning in `dplyr::mutate()`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `experiment_plots_dissolved = list(...)`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In row 1.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> package 'sf' was built under R version 4.2.3</span></span></code></pre></div>
<p>The experiment plots created by <code><a href="../reference/make_exp_plots.html">make_exp_plots()</a></code> is
stored in <code>exp_plots</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exp_data</span><span class="op">$</span><span class="va">exp_plots</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; Simple feature collection with 369 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 352988.4 ymin: 4331460 xmax: 353376.6 ymax: 4332198</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 28N</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    plot_id poly_line strip_id                       geometry</span></span>
<span><span class="co">#&gt; 1        1       1_1        1 POLYGON ((353363.5 4331465,...</span></span>
<span><span class="co">#&gt; 2        2       1_1        1 POLYGON ((353364.9 4331546,...</span></span>
<span><span class="co">#&gt; 3        3       1_1        1 POLYGON ((353366.4 4331628,...</span></span>
<span><span class="co">#&gt; 4        4       1_1        1 POLYGON ((353367.9 4331709,...</span></span>
<span><span class="co">#&gt; 5        5       1_1        1 POLYGON ((353369.3 4331791,...</span></span>
<span><span class="co">#&gt; 6        6       1_1        1 POLYGON ((353370.8 4331872,...</span></span>
<span><span class="co">#&gt; 7        7       1_1        1 POLYGON ((353372.2 4331953,...</span></span>
<span><span class="co">#&gt; 8        8       1_1        1 POLYGON ((353373.7 4332035,...</span></span>
<span><span class="co">#&gt; 9        9       1_1        1 POLYGON ((353375.1 4332116,...</span></span>
<span><span class="co">#&gt; 10       1       1_1        2 POLYGON ((353354.3 4331465,...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; Simple feature collection with 369 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 352988.4 ymin: 4331460 xmax: 353376.6 ymax: 4332198</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 28N</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    plot_id poly_line strip_id                       geometry</span></span>
<span><span class="co">#&gt; 1        1       1_1        1 POLYGON ((353363.5 4331465,...</span></span>
<span><span class="co">#&gt; 2        2       1_1        1 POLYGON ((353364.9 4331546,...</span></span>
<span><span class="co">#&gt; 3        3       1_1        1 POLYGON ((353366.4 4331628,...</span></span>
<span><span class="co">#&gt; 4        4       1_1        1 POLYGON ((353367.9 4331709,...</span></span>
<span><span class="co">#&gt; 5        5       1_1        1 POLYGON ((353369.3 4331791,...</span></span>
<span><span class="co">#&gt; 6        6       1_1        1 POLYGON ((353370.8 4331872,...</span></span>
<span><span class="co">#&gt; 7        7       1_1        1 POLYGON ((353372.2 4331953,...</span></span>
<span><span class="co">#&gt; 8        8       1_1        1 POLYGON ((353373.7 4332035,...</span></span>
<span><span class="co">#&gt; 9        9       1_1        1 POLYGON ((353375.1 4332116,...</span></span>
<span><span class="co">#&gt; 10       1       1_1        2 POLYGON ((353354.3 4331465,...</span></span></code></pre></div>
<p><code>exp_data$exp_plots</code> is a list of experimental plots in
<code>sf</code>. The first element is for nitrogen and the second for
seed following the order of information you provided in
<code>input_plot_info</code>. You can access the individual experiment
plots (an <code>sf</code> object) like this.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exp_data</span><span class="op">$</span><span class="va">exp_plots</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; Simple feature collection with 369 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 352988.4 ymin: 4331460 xmax: 353376.6 ymax: 4332198</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 28N</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    plot_id poly_line strip_id                       geometry</span></span>
<span><span class="co">#&gt; 1        1       1_1        1 POLYGON ((353363.5 4331465,...</span></span>
<span><span class="co">#&gt; 2        2       1_1        1 POLYGON ((353364.9 4331546,...</span></span>
<span><span class="co">#&gt; 3        3       1_1        1 POLYGON ((353366.4 4331628,...</span></span>
<span><span class="co">#&gt; 4        4       1_1        1 POLYGON ((353367.9 4331709,...</span></span>
<span><span class="co">#&gt; 5        5       1_1        1 POLYGON ((353369.3 4331791,...</span></span>
<span><span class="co">#&gt; 6        6       1_1        1 POLYGON ((353370.8 4331872,...</span></span>
<span><span class="co">#&gt; 7        7       1_1        1 POLYGON ((353372.2 4331953,...</span></span>
<span><span class="co">#&gt; 8        8       1_1        1 POLYGON ((353373.7 4332035,...</span></span>
<span><span class="co">#&gt; 9        9       1_1        1 POLYGON ((353375.1 4332116,...</span></span>
<span><span class="co">#&gt; 10       1       1_1        2 POLYGON ((353354.3 4331465,...</span></span></code></pre></div>
<p>We can visualize the layout of the experiment plots using
<code><a href="../reference/viz.html">viz()</a></code> with <code>type = "layout"</code> option.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/viz.html">viz</a></span><span class="op">(</span><span class="va">exp_data</span>, type <span class="op">=</span> <span class="st">"layout"</span>, abline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="V0-basic-work-flow_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>As you can see, ab-lines for the applicator/planter and harvester
were generated for each of the input. We will show how to export
ab-lines later.</p>
</div>
</div>
<div class="section level2">
<h2 id="assign-rates">Assign rates<a class="anchor" aria-label="anchor" href="#assign-rates"></a>
</h2>
<p>Let’s now assign input rates to the experimental plots we just
created. Before doing so, we need to prepare rate information for both
inputs using <code><a href="../reference/prep_rate.html">prep_rate()</a></code>. Here,
<code>design_type = "ls"</code> (Latin Square) is used for both seed and
nitrogen experiments (see <a href="https://difm-brain.github.io/ofpetrial/articles/V1-trial-design-options.html">this
article</a> for other design options and <a href="https://difm-brain.github.io/ofpetrial/articles/V3-change-rates-manually.html">this
article</a> for changing rates manually.).</p>
<div class="section level3">
<h3 id="prepare-rate-information">Prepare rate information<a class="anchor" aria-label="anchor" href="#prepare-rate-information"></a>
</h3>
<p>You can use <code><a href="../reference/prep_rate.html">prep_rate()</a></code> to prepare rate information
before assigning rates to the experimental plots. For nitrogen, exact
rates were specified through the <code>rates</code> option, and trial
design type is specified to be “ls” (short for Latin Square). For seed,
the minimum and maximum rates, and the number of rates were specified.
In this case, the code interally finds the rates automatilly for
you.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#!===========================================================</span></span>
<span><span class="co"># ! Assign rates</span></span>
<span><span class="co"># !===========================================================</span></span>
<span><span class="va">n_rate_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prep_rate.html">prep_rate</a></span><span class="op">(</span></span>
<span>    plot_info <span class="op">=</span> <span class="va">n_plot_info</span>,</span>
<span>    gc_rate <span class="op">=</span> <span class="fl">180</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"lb"</span>,</span>
<span>    rates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">140</span>, <span class="fl">180</span>, <span class="fl">220</span>, <span class="fl">260</span><span class="op">)</span>,</span>
<span>    design_type <span class="op">=</span> <span class="st">"ls"</span>,</span>
<span>    rank_seq_ws <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">n_rate_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ input_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NH3"</span></span>
<span><span class="co">#&gt; $ design_type         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ls"</span></span>
<span><span class="co">#&gt; $ gc_rate             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 180</span></span>
<span><span class="co">#&gt; $ unit                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "lb"</span></span>
<span><span class="co">#&gt; $ tgt_rate_original   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;100, 140, 180, 220, 260&gt;</span></span>
<span><span class="co">#&gt; $ tgt_rate_equiv      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;82.0, 114.8, 147.6, 180.4, 213.2&gt;</span></span>
<span><span class="co">#&gt; $ min_rate            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">#&gt; $ max_rate            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">#&gt; $ num_rates           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 5</span></span>
<span><span class="co">#&gt; $ rank_seq_ws         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;5, 4, 3, 2, 1&gt;</span></span>
<span><span class="co">#&gt; $ rank_seq_as         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;NULL&gt;</span></span>
<span><span class="co">#&gt; $ rate_jump_threshold <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span></span>
<span><span class="va">seed_rate_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prep_rate.html">prep_rate</a></span><span class="op">(</span></span>
<span>    plot_info <span class="op">=</span> <span class="va">seed_plot_info</span>,</span>
<span>    gc_rate <span class="op">=</span> <span class="fl">32000</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"seed"</span>,</span>
<span>    min_rate <span class="op">=</span> <span class="fl">16000</span>,</span>
<span>    max_rate <span class="op">=</span> <span class="fl">40000</span>,</span>
<span>    num_rates <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    design_type <span class="op">=</span> <span class="st">"ls"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Trial rates were not directly specified via the {rates} option, so the trial rates will be calculated using min_rate, max_rate, gc_rate, and num_rates</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">seed_rate_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ input_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "seed"</span></span>
<span><span class="co">#&gt; $ design_type         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ls"</span></span>
<span><span class="co">#&gt; $ gc_rate             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 32000</span></span>
<span><span class="co">#&gt; $ unit                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "seed"</span></span>
<span><span class="co">#&gt; $ tgt_rate_original   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;16000, 24000, 32000, 40000&gt;</span></span>
<span><span class="co">#&gt; $ tgt_rate_equiv      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;16000, 24000, 32000, 40000&gt;</span></span>
<span><span class="co">#&gt; $ min_rate            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 16000</span></span>
<span><span class="co">#&gt; $ max_rate            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 40000</span></span>
<span><span class="co">#&gt; $ num_rates           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4</span></span>
<span><span class="co">#&gt; $ rank_seq_ws         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;NULL&gt;</span></span>
<span><span class="co">#&gt; $ rank_seq_as         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;NULL&gt;</span></span>
<span><span class="co">#&gt; $ rate_jump_threshold <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assign-rates-1">Assign rates<a class="anchor" aria-label="anchor" href="#assign-rates-1"></a>
</h3>
<p>We can now use <code><a href="../reference/assign_rates.html">assign_rates()</a></code> to assign rates to
experiment plots.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trial_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assign_rates.html">assign_rates</a></span><span class="op">(</span><span class="va">exp_data</span>, rate_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">n_rate_info</span>, <span class="va">seed_rate_info</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Here is the visualization of the trial design done by
<code>viz</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/viz.html">viz</a></span><span class="op">(</span><span class="va">trial_design</span>, abline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="V0-basic-work-flow_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Along with the spatial pattern of the input rates, the
applicator/planter ab-line and harvester ab-line are drawn by
default.</p>
</div>
</div>
<div class="section level2">
<h2 id="diagnose-the-trial-design">Diagnose the trial design<a class="anchor" aria-label="anchor" href="#diagnose-the-trial-design"></a>
</h2>
<p>The <code>ofpetrial</code> package offers several functions to check
the soundness of a trial design (see <a href="https://difm-brain.github.io/ofpetrial/articles/V4-diagnose-td.html">this
article</a> for more details and examples).</p>
<p>Here, let’s check the correlation between the seed and NH3 rates.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span></span>
<span>  <span class="va">cor_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_ortho_inputs.html">check_ortho_inputs</a></span><span class="op">(</span><span class="va">trial_design</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Checking the correlation between the two inputs. This may take some time depending on the number of experiment plots.</span></span>
<span><span class="co">#&gt; [1] 0.01184833</span></span></code></pre></div>
<p>The correlation coefficient is 0.01, which is certainly
acceptable.</p>
</div>
<div class="section level2">
<h2 id="make-a-trial-design-report">Make a trial design report<a class="anchor" aria-label="anchor" href="#make-a-trial-design-report"></a>
</h2>
<p>After creating a trial design you can download a trial report that
serves as a guide for implementing the trial as well as a reminder of
the equipment sizes, plot specifications, and treatment levels that were
chosen. The report is saved as an html document named
“trial_design_report.html”. Along with basic information about the
design (total amount of inputs to be applied, number of replicates of
each treatment level, plot size, etc.), the report also contains figures
displaying how the provided ab-lines and machines will line up inside
the trial plots.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_trial_report.html">make_trial_report</a></span><span class="op">(</span></span>
<span>  td <span class="op">=</span> <span class="va">trial_design</span>,</span>
<span>  folder_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="write-the-trial-design-files-for-implementation">Write the trial design files for implementation<a class="anchor" aria-label="anchor" href="#write-the-trial-design-files-for-implementation"></a>
</h2>
<p>Once you are satisfied with the trial design and the location of the
ab-lines, you can write out all the necessary files as shape files for
the machine operators to actually implement the trial.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_trial_files.html">write_trial_files</a></span><span class="op">(</span><span class="va">td</span>, folder_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, zip <span class="op">=</span> <span class="cn">TRUE</span>, zip_name <span class="op">=</span> <span class="st">"td-collection"</span><span class="op">)</span></span></code></pre></div>
<p>Here, all the shape files (trial dsign, applicator/planter ab-line,
and harvester ab-line) are packed in a zipped folder, named
“td-collection.zip”.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Taro Mieno, Brittani Edge.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
