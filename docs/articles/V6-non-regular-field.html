<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Non-regular fields â€¢ ofpetrial</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Non-regular fields">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-B09QYRX8XQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B09QYRX8XQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ofpetrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/V0-basic-work-flow.html">Basic Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/V5-understanding-structure.html">Understanding the structure of objects generated by the package</a></li>
    <li><a class="dropdown-item" href="../articles/V1-trial-design-options.html">Trial Design Options</a></li>
    <li><a class="dropdown-item" href="../articles/V2-ab-line.html">Trial AB-line Types and Options</a></li>
    <li><a class="dropdown-item" href="../articles/V4-diagnose-td.html">Diagnose Trial Designs</a></li>
    <li><a class="dropdown-item" href="../articles/V3-change-rates-manually.html">Change Trial Rates Manually</a></li>
    <li><a class="dropdown-item" href="../articles/V6-non-regular-field.html">Non-regular fields</a></li>
    <li><a class="dropdown-item" href="../articles/V7-visualize-from-scratch.html">Modify trial design maps or make them from scratch</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DIFM-Brain/ofpetrial/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Non-regular fields</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DIFM-Brain/ofpetrial/blob/HEAD/vignettes/articles/V6-non-regular-field.Rmd" class="external-link"><code>vignettes/articles/V6-non-regular-field.Rmd</code></a></small>
      <div class="d-none name"><code>V6-non-regular-field.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://difm-brain.github.io/ofpetrial/">ofpetrial</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="when-the-field-is-curved">When the field is curved<a class="anchor" aria-label="anchor" href="#when-the-field-is-curved"></a>
</h2>
<p>When the field is curved, <code><a href="../reference/make_exp_plots.html">make_exp_plots()</a></code> makes no
effort to keep the length of plots across strips the same. Rather, it
will find the best plot width within [<code>min_plot_width</code>,
<code>max_plot_width</code>] that makes the most use of the available
space. Also, <code><a href="../reference/make_exp_plots.html">make_exp_plots()</a></code> does not try to start strips
so that the bottom line of their first plots are lined up to be
stratight. Consequently, when the field is curved, experiment plots will
look like this.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_plot_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prep_plot.html">prep_plot</a></span><span class="op">(</span></span>
<span>    input_name <span class="op">=</span> <span class="st">"NH3"</span>,</span>
<span>    unit_system <span class="op">=</span> <span class="st">"imperial"</span>,</span>
<span>    machine_width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    section_num <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    harvester_width <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    headland_length <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    side_length <span class="op">=</span> <span class="fl">60</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Since plot width was not provided via the `plot_with` option`, it was set to a least common multiplier of the widths of the machines.</span></span>
<span></span>
<span><span class="va">exp_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/make_exp_plots.html">make_exp_plots</a></span><span class="op">(</span></span>
<span>    input_plot_info <span class="op">=</span> <span class="va">n_plot_info</span>,</span>
<span>    boundary_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"boundary-irregular1.shp"</span>, package <span class="op">=</span> <span class="st">"ofpetrial"</span><span class="op">)</span>,</span>
<span>    abline_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ab-line-irregular1.shp"</span>, package <span class="op">=</span> <span class="st">"ofpetrial"</span><span class="op">)</span>,</span>
<span>    abline_type <span class="op">=</span> <span class="st">"free"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE</span></span>
<span></span>
<span><span class="fu"><a href="../reference/viz.html">viz</a></span><span class="op">(</span><span class="va">exp_data</span>, type <span class="op">=</span> <span class="st">"layout"</span><span class="op">)</span></span></code></pre></div>
<p><img src="V6-non-regular-field_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>In this kind of spatial arrangement of experiment plots, some blocks
can be shaped not so rectangular and it is simply impossible to define
regular rectangular blocks. 5 by 5 blocks would look like below for this
field if you try to assign blocks regardless.</p>
<p><img src="V6-non-regular-field_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Warning: Removed 1 row containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_text()`).</span></span></code></pre>
<p><img src="V6-non-regular-field_files/figure-html/unnamed-chunk-3-2.png" width="700"></p>
<p>This means that designing trial using a randomized block design for
this type of field may not produce a design you might have intended.</p>
</div>
<div class="section level2">
<h2 id="field-with-ditches-and-holes">Field with ditches and holes<a class="anchor" aria-label="anchor" href="#field-with-ditches-and-holes"></a>
</h2>
<p>More often than not, fields have ditches (or parts where crops cannot
be grown). The <code><a href="../reference/make_exp_plots.html">make_exp_plots()</a></code> function avoids such areas
automatically in creating experiment plots like below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_plot_info</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prep_plot.html">prep_plot</a></span><span class="op">(</span></span>
<span>    input_name <span class="op">=</span> <span class="st">"NH3"</span>,</span>
<span>    unit_system <span class="op">=</span> <span class="st">"imperial"</span>,</span>
<span>    machine_width <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    section_num <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    harvester_width <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    headland_length <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    side_length <span class="op">=</span> <span class="fl">60</span>,</span>
<span>    min_plot_length <span class="op">=</span> <span class="fl">250</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Since plot width was not provided via the `plot_with` option`, it was set to a least common multiplier of the widths of the machines.</span></span>
<span></span>
<span><span class="va">exp_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/make_exp_plots.html">make_exp_plots</a></span><span class="op">(</span></span>
<span>    input_plot_info <span class="op">=</span> <span class="va">n_plot_info</span>,</span>
<span>    boundary_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"field_boundary_with_holes.shp"</span>, package <span class="op">=</span> <span class="st">"ofpetrial"</span><span class="op">)</span>,</span>
<span>    abline_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ab_line_for_field_with_holes.shp"</span>, package <span class="op">=</span> <span class="st">"ofpetrial"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/viz.html">viz</a></span><span class="op">(</span><span class="va">exp_data</span>, type <span class="op">=</span> <span class="st">"layout"</span><span class="op">)</span></span></code></pre></div>
<p><img src="V6-non-regular-field_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Taro Mieno, Brittani Edge.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
